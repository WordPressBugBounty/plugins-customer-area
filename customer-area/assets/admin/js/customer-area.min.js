function getLicenseControlApiKeyInput(t){return t.find(".cuar-js-api-key")}function getLicenseControlProductIdInput(t){return t.find(".cuar-js-product-id")}function getLicenseControlActivateButton(t){return t.find(".cuar-js-activate-button")}function getLicenseControlResultContainer(t){return t.find(".cuar-js-result > span")}function getLicenseControlAddOn(t){return getLicenseControlApiKeyInput(t).data("addon")}function activateLicense(t,e){var n,a=getLicenseControlApiKeyInput(e),r=getLicenseControlProductIdInput(e),o=getLicenseControlActivateButton(e),s=getLicenseControlResultContainer(e),c=a.val().trim();0===c.length?s.html(""):(n=(n=r.val())&&n.trim(),s.html(cuar.checkingLicense).removeClass().addClass("cuar-ajax-running"),a.prop("disabled",!0),r.prop("disabled",!0),o.prop("disabled",!0),e={action:"cuar_validate_license",addon_id:getLicenseControlAddOn(e),api_key:c,product_id:n},t.post(cuar.ajaxUrl,e,function(t){a.prop("disabled",!1),r.prop("disabled",!1),o.prop("disabled",!1),s.removeClass().addClass(t.success?"cuar-ajax-success":"cuar-ajax-failure").html(t.success?t.message:t.error)},"json",function(){a.prop("disabled",!1),r.prop("disabled",!1),o.prop("disabled",!1),s.removeClass().addClass("cuar-ajax-failure").html(cuar.unreachableLicenseServerError)}))}!function(n){n.cuar||(n.cuar={}),n.cuar.addressManager=function(t,e){var o=this;o.fields=["name","company","line1","line2","zip","city","country","state","vat-number","logo-url"],o.isBusy=!1,o.$el=n(t),o.el=t,o.$el.data("cuar.addressManager",o),o.init=function(){o.options=n.extend({},n.cuar.addressManager.defaultOptions,e),o.$el.on("cuar:address:clear",o._onClearAddress),o.$el.on("cuar:address:set",o._onSetAddress),o.$el.on("cuar:address:get",o._onGetAddress),o.$el.on("cuar:address:getNonce",o._onGetNonce),o.$el.on("cuar:address:getContext",o._onGetContext),o.$el.on("cuar:address:getAddressId",o._onGetAddressId),o.$el.on("cuar:address:isEmpty",o._onIsAddressEmpty),o.$el.on("cuar:address:setBusy",o._onSetBusy),o.$el.on("cuar:address:isBusy",o._onIsBusy),o.$el.on("cuar:address:loadFromOwner",o._onLoadAddressFromOwner),o.$el.on("cuar:address:saveForOwner",o._onSaveAddressForOwner),o.$el.on("click",".cuar-js-action.cuar-js-reset",o._onResetAddressAction)},o._onLoadAddressFromOwner=function(t,e){if(o._onIsBusy())return!1;if(null==e)alert(cuar.addressMustPickOwnerFirst);else{if(!o._onIsAddressEmpty()&&!confirm(cuar.addressConfirmLoadAddressFromOwner))return!1;e={action:"cuar_load_address_from_owner",cuar_nonce:o._onGetNonce(),owner:e,address_id:o._onGetAddressId(),context:o._onGetContext()};o._onSetBusy(null,!0),n.post(cuar.ajaxUrl,e,function(t){o._onSetBusy(null,!1),0==t.success?alert(t.data):null!=t.data.address?o._onSetAddress(null,t.data.address):alert(cuar.addressNoAddressFromOwner)})}},o._onSaveAddressForOwner=function(t,e){if(o._onIsBusy())return!1;if(null==e)alert(cuar.addressMustPickOwnerFirst);else{if(!confirm(cuar.addressConfirmSaveAddressForOwner))return!1;e={action:"cuar_save_address_for_owner",cuar_nonce:o._onGetNonce(),owner:e,address_id:o._onGetAddressId(),address:o._onGetAddress(),context:o._onGetContext()};o._onSetBusy(null,!0),n.post(cuar.ajaxUrl,e,function(t){o._onSetBusy(null,!1),0==t.success&&alert(t.data)})}},o._onResetAddressAction=function(t){return t.preventDefault(),!o._onIsBusy()&&!!confirm(cuar.addressConfirmResetAddress)&&void o._onClearAddress(null)},o._onClearAddress=function(t){o._onSetAddress(null,{name:"",company:"",line1:"",line2:"",zip:"",city:"",vat_number:"",logo_url:"",country:"",state:""})},o._onIsBusy=function(t){return o.isBusy},o._onSetBusy=function(t,e){(o.isBusy=e)?(o._getProgressIndicator().show(),o._getActions().addClass("button-disabled"),o._getInputFields().attr("disabled","disabled"),o._getInputContainers().addClass("disabled")):(o._getProgressIndicator().hide(),o._getActions().removeClass("button-disabled"),o._getInputFields().removeAttr("disabled"),o._getInputContainers().removeClass("disabled"))},o._onIsAddressEmpty=function(t){for(var e=0;e<o.fields.length;e++){var n=o.fields[e],n=o._getField(n).val();if(null!=n&&0<n.length)return!1}return!0},o._onGetAddress=function(t){for(var e={},n=0;n<o.fields.length;n++){var a=o.fields[n];e[a]=o._getField(a).val()}return e},o._onSetAddress=function(t,e){for(var n=0;n<o.fields.length;n++){var a=o.fields[n],r=o._getField(a);"country"===a?r.val(e[a]).trigger("change"):"state"===a?(r.val(e[a]),r.data("pending-value",e[a])):"vat-number"===a?r.val(e.vat_number):"logo-url"===a?r.val(e.logo_url):r.val(e[a])}},o._onGetNonce=function(){return n("input[name=cuar_nonce]",o.el).val()},o._onGetAddressId=function(){return o.$el.data("address-id")},o._onGetContext=function(){return o.$el.data("context")},o._getField=function(t){var e=".cuar-js-address-";return n(e+="vat_number"===t?"vat-number":"logo_url"===t?"logo-url":t,o.el).find(".cuar-js-address-field:input")},o._getActions=function(){return n(".cuar-js-action",o.el)},o._getProgressIndicator=function(){return n(".cuar-js-progress",o.el)},o._getInputFields=function(){return n(".cuar-js-address-field",o.el)},o._getInputContainers=function(){return n(".cuar-js-address-field-container",o.el)},o.init()},n.cuar.addressManager.defaultOptions={},n.fn.addressManager=function(t){return this.each(function(){new n.cuar.addressManager(this,t)})}}(jQuery),function(r){r.cuar||(r.cuar={}),r.cuar.bindCountryStateInputs=function(t,e){var a=this;a.$el=r(t),a.el=t,a.isBusy=!1,a.$el.data("cuar.bindCountryStateInputs",a),a.init=function(){var t;null===r.cuar.bindCountryStateInputs.defaultOptions.select2.dropdownParent&&(t=r("body"),r.cuar.bindCountryStateInputs.defaultOptions.select2.dropdownParent=t.hasClass("wp-admin")?t:r("#cuar-js-content-container")),a.options=r.extend({},r.cuar.bindCountryStateInputs.defaultOptions,e),a._getCountryField().cuarSelect2(a.options.select2),a._getStateField().cuarSelect2(a.options.select2),a._getCountryField().on("change",a._onCountryChanged)},a._onCountryChanged=function(){var t=a._getCountryField(),e=a._getStateField(),n=a._getStateFieldContainer(),t=t.val();null===t||0===t.length||void 0===t?n.hide():(t={action:"cuar_get_country_states",country:t,address_id:a._getAddressId(),cuar_nonce:a._getNonce(),context:a._getContext()},a._setAddressBusy(!0),r.post(cuar.ajaxUrl,t,function(t){a._setAddressBusy(!1),0==t.success?alert(t.data):(null!=t.data.states?(e.html(t.data.htmlOptions).cuarSelect2(a.options.select2),e.val(e.data("pending-value")).trigger("change"),n.show()):(e.val("").trigger("change"),n.hide()),e.data("pending-value",""))}))},a._isAddressBusy=function(){return a._getFieldContainer().triggerHandler("cuar:address:setBusy")},a._setAddressBusy=function(t){a._getFieldContainer().trigger("cuar:address:setBusy",[t])},a._getFieldContainer=function(){return a.$el.parents(a.options.fieldContainer)},a._getNonce=function(){return a._getFieldContainer().triggerHandler("cuar:address:getNonce")},a._getContext=function(){return a._getFieldContainer().triggerHandler("cuar:address:getContext")},a._getAddressId=function(){return a._getFieldContainer().triggerHandler("cuar:address:getAddressId")},a._getCountryField=function(){return r(a.options.countrySelector,a.el).find("select")},a._getStateFieldContainer=function(){return r(a.options.stateSelector,a.el)},a._getStateField=function(){return r(a.options.stateSelector,a.el).find("select")},a.init()},r.cuar.bindCountryStateInputs.defaultOptions={fieldContainer:".cuar-js-address",countrySelector:".cuar-js-address-country",stateSelector:".cuar-js-address-state",select2:{width:"100%",allowClear:!0,placeholder:"",dropdownParent:null}},r.fn.bindCountryStateInputs=function(t){return this.each(function(){new r.cuar.bindCountryStateInputs(this,t)})}}(jQuery),function(c){c.cuar||(c.cuar={}),c.cuar.classicUploader=function(t,n){var s=this;s.$el=c(t),s.el=t,s.$el.data("cuar.classicUploader",s),s.uploadsInProgress=0,s.init=function(){s.options=c.extend({},c.cuar.classicUploader.defaultOptions,n),s._getFileInput().css({opacity:0});var t=s._getPostId(),e={action:"cuar_attach_file",method:"classic-upload",post_id:t},t=(e["cuar_classic-upload_"+t]=s._getNonce(),s._getDropZone());t.fileupload({url:cuar.ajaxUrl,dataType:"json",paramName:"cuar_file",formData:e,sequentialUploads:!0,dropZone:t,add:s._onFileUploadAdd,done:s._onFileUploadDone,fail:s._onFileUploadFail,progress:s._onFileUploadProgress}),c(document).bind("dragover",s._onDragOverDropZone)},s._onDragOverDropZone=function(t){var e=s._getDropZone(),n=window.dropZoneTimeout,a=(n?clearTimeout(n):e.addClass("in"),!1),r=t.target;do{if(r===e[0]){a=!0;break}}while(null!=(r=r.parentNode));a?e.addClass("hover"):e.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,e.removeClass("in hover")},100)},s._onFileUploadAdd=function(t,e){s._updateButtonState("disable");for(var n=0,a=e.files.length;n<a;n++){var r=e.files[n].name;if(e.files[n].attachmentItem=c(document).triggerHandler("cuar:attachmentManager:addItem",[s._getPostId(),r,r]),null==e.files[n].attachmentItem)return!1;c(document).trigger("cuar:attachmentManager:updateItemState",[e.files[n].attachmentItem,"pending"])}e.submit()},s._onFileUploadDone=function(t,e){for(var n,a,r=0,o=e.files.length;r<o;r++)e.result.success?(a=e.result.data.file,n=e.result.data.caption,c(document).trigger("cuar:attachmentManager:updateItem",[e.files[r].attachmentItem,s._getPostId(),a,n]),c(document).trigger("cuar:attachmentManager:updateItemState",[e.files[r].attachmentItem,"success"])):(a=null,0<e.result.data.length&&(a=e.result.data[0]),c(document).trigger("cuar:attachmentManager:showError",[e.files[r].attachmentItem,e.files[r].name,a,!0]));s._updateButtonState("enable")},s._updateButtonState=function(t){var e=s.$el.closest(".cuar-js-wizard-section").find(".cuar-submit-container > input[type=submit]");void 0===t||"disable"===t?(s.uploadsInProgress++,e.addClass("disabled")):"enable"===t&&(s.uploadsInProgress--,0===s.uploadsInProgress)&&e.removeClass("disabled")},s._onFileUploadFail=function(t,e){for(var n=0,a=e.files.length;n<a;n++)c(document).trigger("cuar:attachmentManager:showError",[e.files[n].attachmentItem,e.files[n].name,e.errorThrown,!0])},s._onFileUploadProgress=function(t,e){for(var n=0,a=e.files.length;n<a;n++){var r=parseInt(e.loaded/e.total*100,10);c(document).trigger("cuar:attachmentManager:updateItemProgress",[e.files[n].attachmentItem,r])}},s._getNonce=function(){return c("#cuar_classic-upload_"+s._getPostId(),s.el).val()},s._getPostId=function(){return s.$el.data("post-id")},s._getDropZone=function(){return c(s.options.dropzone,s.el).first()},s._getFileInput=function(){return c(s.options.fileInput,s.el).first()},s.init()},c.cuar.classicUploader.defaultOptions={dropzone:".cuar-js-dropzone",fileInput:".cuar-js-file-input"},c.fn.classicUploader=function(t){return this.each(function(){new c.cuar.classicUploader(this,t)})}}(jQuery),function(d){d.cuar||(d.cuar={}),d.cuar.fileAttachmentManager=function(t,e){var u=this;u.$el=d(t),u.el=t,u.$el.data("cuar.fileAttachmentManager",u),u.init=function(){u.options=d.extend({},d.cuar.fileAttachmentManager.defaultOptions,e),u._getSelectors().first().show(),d(document).on("change",u.options.selectorInput,u._onSelectorInputChanged),u._getAttachmentList().on("click",u.options.removeAction,u._onRemoveActionClick),u._getErrorList().on("click",u.options.dismissAction,u._onDismissError),d(document).on("cuar:attachmentManager:addItem",u._onAddAttachmentItem),d(document).on("cuar:attachmentManager:sendFile",u._onSendFile),d(document).on("cuar:attachmentManager:updateFile",u._onUpdateFile),d(document).on("cuar:attachmentManager:updateItem",u._onUpdateAttachmentItem),d(document).on("cuar:attachmentManager:updateItemProgress",u._onUpdateAttachmentItemProgress),d(document).on("cuar:attachmentManager:updateItemState",u._onUpdateAttachmentItemState),d(document).on("cuar:attachmentManager:showError",u._onShowError)},u._onShowError=function(t,e,n,a,r){u._showError(e,n,a,r)},u._onUpdateAttachmentItem=function(t,e,n,a,r){0==e.length?console.log("_onUpdateAttachmentItem :: Item for not found"):u._updateAttachmentItem(e,n,a,r)},u._onUpdateAttachmentItemProgress=function(t,e,n){0==e.length?console.log("_onUpdateAttachmentItemProgress :: Item not found"):u._updateAttachmentItemProgress(e,n)},u._onUpdateAttachmentItemState=function(t,e,n){0==e.length?console.log("_onUpdateAttachmentItemState :: Item not found"):u._updateAttachmentItemState(e,n)},u._onSelectorInputChanged=function(){var t=u._getSelectors(),e=d(this).val(),n=t.filter(function(){return d(this).data("method")==e});n.is(":visible")||((t=t.filter(":visible")).length<=0?n.fadeIn():t.fadeOut("fast",function(){n.fadeIn()}))},u._onRemoveActionClick=function(t){var n,a,e;t.preventDefault(),confirm(cuar.confirmDeleteAttachedFile)&&(t=(n=d(this).closest(u.options.attachmentItem)).data("post-id"),a=n.data("filename"),e=u._getAttachmentListRemoveNonce(),u._updateAttachmentItemState(n,"pending"),d.post(cuar.ajaxUrl,{action:"cuar_remove_attached_file",post_id:t,filename:a,cuar_remove_attachment_nonce:e},function(t){var e;0==t.success?(e="",0<t.data.length&&(e=t.data[0]),u._showError(n,a,e,!1)):u._removeItem(n)}))},u._onSendFile=function(t,n,e,a,r,o,s,c){var i=s,s=(void 0!==s&&0!=s.trim().length||(i=o),u._updateAttachmentItem(n,a,o,i),u._updateAttachmentItemState(n,"pending"),{action:"cuar_attach_file",method:e,post_id:a,filename:o,caption:i,extra:c});s["cuar_"+e+"_"+a]=r,d.post(cuar.ajaxUrl,s,function(t){var e;0==t.success?(e="",0<t.data.length&&(e=t.data[0]),u._showError(n,o,e,!0)):(e=t.data.file,t=t.data.caption,u._updateAttachmentItem(n,a,e,t),u._updateAttachmentItemState(n,"success"),d(document).trigger("cuar:attachmentManager:fileAttached",[n,a,o,e,t]))})},u._onUpdateFile=function(t,n,a,e,r,o){var s=o;void 0!==o&&0!=o.trim().length||(s=r),u._updateAttachmentItemState(n,"pending"),d.post(cuar.ajaxUrl,{action:"cuar_update_attached_file",post_id:a,filename:r,caption:s,cuar_update_attachment_nonce:e},function(t){var e;0==t.success?(e="",0<t.data.length&&(e=t.data[0]),u._showError(n,r,e,!0)):(e=t.data.file,t=t.data.caption,u._updateAttachmentItem(n,a,e,t),u._updateAttachmentItemState(n,"success"))})},u._onAddAttachmentItem=function(t,e,n,a,r){var o;return 0<cuar.maxAttachmentCount&&u._getAttachmentItems().length>=cuar.maxAttachmentCount?(u._showError(null,n,cuar.tooManyAttachmentsAlready,!0),null):((o=u._getAttachmentTemplate().clone()).appendTo(u.options.attachmentList),u._updateAttachmentItem(o,e,n,a),u._getAttachmentListEmptyMessage().hide(),o)},u._removeItem=function(t){t.fadeOut(400,function(){u._getAttachmentItems().length<=1&&u._getAttachmentListEmptyMessage().show(),t.remove()})},u._updateAttachmentItem=function(t,e,n,a){void 0!==a&&0!==a.trim().length||(a=n),t.data("post-id",e),t.data("filename",n),t.children(".cuar-js-caption").html(a)},u._updateAttachmentItemState=function(t,e){t.removeClass(function(t,e){return(e.match(/(^|\s)cuar-js-state-\S+/g)||[]).join(" ")}),t.addClass("cuar-js-state-"+e);var n=t.children(".cuar-js-actions"),a=t.children(".cuar-js-progress");switch(e){case"pending":n.hide(),a.show(),u._updateAttachmentItemProgress(t,0);break;case"error":case"success":n.show(),a.hide()}d(document).trigger("cuar:attachmentManager:itemStateUpdated",[t,e])},u._updateAttachmentItemProgress=function(t,e){var t=t.children(".cuar-js-progress"),n=t.find(".cuar-js-progress-bar"),a=t.find(".cuar-js-progress-label");t.show(),e<=0?(n.addClass("cuar-js-indeterminate").addClass("progress-bar-striped").addClass("active").css({width:"100%"}).attr("aria-valuenow","100"),a.hide().html("")):(n.removeClass("cuar-js-indeterminate").removeClass("progress-bar-striped").removeClass("active").css({width:e+"%"}).attr("aria-valuenow",e),a.show().html(e+"%"))},u._showError=function(t,e,n,a){null!==t&&(console.log(t),console.log(a),a?u._removeItem(t):u._updateAttachmentItemState(t,"error")),null!=n&&0<n.length&&(null!=e&&0<e.length&&(n="<strong>"+e+"</strong> - "+n),(a=u._getErrorTemplate().clone()).find(".cuar-js-message").html(n),a.appendTo(u.options.errorList,u.el),a.show())},u._onDismissError=function(t){d(this).closest(".cuar-js-error").remove(),t.preventDefault()},u._getErrorList=function(){return d(u.options.errorList,u.el)},u._getAttachmentList=function(){return d(u.options.attachmentList)},u._getAttachmentListEmptyMessage=function(){return u._getAttachmentList().find(".cuar-js-empty-message")},u._getAttachmentItems=function(){return u._getAttachmentList().find(u.options.attachmentItem)},u._getAttachmentItemByFilename=function(t){return u._getAttachmentItems().filter(function(){return d(this).data("filename")==t})},u._getAttachmentListRemoveNonce=function(){return d("#cuar_remove_attachment_nonce",u._getAttachmentList()).val()},u._getErrorTemplate=function(){return d(u.options.errorTemplate,u.el).children(".cuar-js-error").first()},u._getAttachmentTemplate=function(){return d(u.options.attachmentItemTemplate).find(u.options.attachmentItem).first()},u._getSelectorInput=function(){return d(u.options.selectorInput,u.el)},u._getSelectors=function(){return d(u.options.selectorList+">"+u.options.selectorItem,u.el)},u.init()},d.cuar.fileAttachmentManager.defaultOptions={errorList:".cuar-js-file-attachment-errors",attachmentList:".cuar-js-file-attachments",attachmentItem:".cuar-js-file-attachment",attachmentItemTemplate:".cuar-js-file-attachment-template",errorTemplate:".cuar-js-error-template",selectorList:".cuar-js-file-selectors",selectorItem:".cuar-js-file-selector",selectorInput:".cuar-js-file-selector-input",removeAction:".cuar-js-remove-action",dismissAction:".cuar-js-dismiss"},d.fn.fileAttachmentManager=function(t){return this.each(function(){new d.cuar.fileAttachmentManager(this,t)})}}(jQuery),function(u){u.cuar||(u.cuar={}),u.cuar.ftpUploader=function(t,e){var i=this;i.$el=u(t),i.el=t,i.$el.data("cuar.ftpUploader",i),i.init=function(){i.options=u.extend({},u.cuar.ftpUploader.defaultOptions,e),i._getAddButton().click(i._onAddButtonClicked),u(document).on("cuar:attachmentManager:fileAttached",i._removeFileFromSelect)},i._removeFileFromSelect=function(t,e,n,a,r,o){"ftp-move"==i._getFtpOperation()&&i._getSelectBox().children().filter(function(){return u(this).val()==a}).remove()},i._onAddButtonClicked=function(t){t.preventDefault();var e=i._getSelectedFiles(),n=i._getPostId(),a=i._getFtpOperation();if(null!=e&&0!=e.length)for(var r=0,o=e.length;r<o;r++){var s=e[r],c=u(document).triggerHandler("cuar:attachmentManager:addItem",[n,s,s]);null!=c&&u(document).trigger("cuar:attachmentManager:sendFile",[c,"ftp-folder",n,i._getNonce(),s,"",a])}},i._getFtpOperation=function(){return i._getCopyCheckbox().is(":checked")?"ftp-copy":"ftp-move"},i._getNonce=function(){return u("#cuar_ftp-folder_"+i._getPostId(),i.el).val()},i._getPostId=function(){return i.$el.data("post-id")},i._getSelectedFiles=function(){return i._getSelectBox().val()},i._getAddButton=function(){return u(i.options.addButton,i.el)},i._getSelectBox=function(){return u(i.options.selectBox,i.el).first()},i._getCopyCheckbox=function(){return u(i.options.copyCheckbox,i.el).first()},i.init()},u.cuar.ftpUploader.defaultOptions={addButton:".cuar-js-ftp-add-files",selectBox:".cuar-js-ftp-file-selection",copyCheckbox:".cuar-js-copy-file-checkbox"},u.fn.ftpUploader=function(t){return this.each(function(){new u.cuar.ftpUploader(this,t)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.gatewayPicker=function(t,e){var n=this;n.$el=a(t),n.el=t,n.$el.data("cuar.gatewayPicker",n),n.init=function(){n.options=a.extend({},a.cuar.gatewayPicker.defaultOptions,e),n._getSelectors().on("change",n._onGatewaySelected)},n._onGatewaySelected=function(t){t.preventDefault();t=a(this).data("gateway");n._getGatewayForms().hide(0),n._getGatewayForm(t).show(0)},n._getGatewayForms=function(t){return a(n.options.gatewayForm,n.el)},n._getGatewayForm=function(t){return a(n.options.gatewayForm+"[data-gateway="+t+"]",n.el)},n._getSelectors=function(){return a(n.options.gatewaySelector,n.el)},n.init()},a.cuar.gatewayPicker.defaultOptions={gatewaySelector:".cuar-js-gateway-selector",gatewayForm:".cuar-js-gateway-form"},a.fn.gatewayPicker=function(t){return this.each(function(){new a.cuar.gatewayPicker(this,t)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.ajaxFolderAction=function(t,e){var n=this;n.$el=a(t),n.el=t,n.$el.data("cuar.ajaxFolderAction",n),n.init=function(){n.options=a.extend({},a.cuar.ajaxFolderAction.defaultOptions,e),n._getButton().click(n._onButtonClicked)},n._onButtonClicked=function(t){t.preventDefault();t={_ajax_nonce:n._onGetNonce(),action:"cuar_folder_action",folder_action:n._getAction(),path:n._getPath(),extra:n._getExtra()};n.$el.css("opacity","0.5"),n._getButton().bind("click",function(t){t.preventDefault()}),a.post(cuar.ajaxUrl,t,function(t){n.$el.css("opacity","1"),0==t.success?(null!=t.data&&0<t.data.length&&alert(t.data),n._getButton().click(n._onButtonClicked)):null!=(t=n._getSuccessMessage())&&0<t.length?n.$el.removeClass("cuar-error").addClass("cuar-info").html(t):n.$el.remove()})},n._onGetNonce=function(){return n.$el.data("nonce")},n._getButton=function(){return a(".button",n.el)},n._getPath=function(){return n.$el.data("path")},n._getAction=function(){return n.$el.data("action")},n._getExtra=function(){return n.$el.data("extra")},n._getSuccessMessage=function(){return n.$el.data("success-message")},n.init()},a.fn.ajaxFolderAction=function(t){return this.each(function(){new a.cuar.ajaxFolderAction(this,t)})}}(jQuery),jQuery(document).ready(function(n){n(".cuar-js-license-field").each(function(){var e=n(this);e.on("click",".cuar-js-activate-button",function(t){return t.preventDefault(),activateLicense(n,e),!1})})}),function(a){a.cuar||(a.cuar={}),a.cuar.mediaInputControl=function(t,e){var n=this;n.$el=a(t),n.el=t,n.isBusy=!1,n.fileFrame=null,n.$el.data("cuar.mediaInputControl",n),n.init=function(){n.options=a.extend({},a.cuar.mediaInputControl.defaultOptions,e),n.$el.on("click",".cuar-upload-button",n._onUploadButtonClicked)},n._onUploadButtonClicked=function(t){t.preventDefault();t=a(this);n.fileFrame||(n.fileFrame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:t.data("uploader_title"),button:{text:t.data("uploader_button_text")},multiple:!1}),n.fileFrame.on("menu:render:default",function(t){t.unset("library-separator"),t.unset("gallery"),t.unset("featured-image"),t.unset("embed"),t.set({})}),n.fileFrame.on("insert",function(){n.fileFrame.state().get("selection").each(function(t,e){t=t.toJSON(),n._getUrlInputField().val(t.url)})})),n.fileFrame.open()},n._getUrlInputField=function(){return a(n.options.urlInputSelector,n.el)},n.init()},a.cuar.mediaInputControl.defaultOptions={urlInputSelector:".cuar-upload-input"},a.fn.mediaInputControl=function(t){return this.each(function(){new a.cuar.mediaInputControl(this,t)})}}(jQuery),function(r){r.cuar||(r.cuar={}),r.cuar.paymentDataManager=function(t,n){var a=this;a.$el=r(t),a.el=t,a.$el.data("cuar.paymentDataManager",a),a.init=function(){a.options=r.extend({},r.cuar.paymentDataManager.defaultOptions,n);var t=r(".cuar-datepicker-control input[type=hidden]",a.el),e=r(".cuar-datepicker-control .cuar-datepicker-input",a.el);e.datepicker({dateFormat:a.options.datePickerOptions.dateFormat,altFormat:a.options.rawDateFormat,altField:t}),e.datepicker("setDate",a._formatDate(t.val())),e.val(a._formatDate(t.val()))},a._formatDate=function(t){t=r.datepicker.parseDate(a.options.rawDateFormat,t,a.options.datePickerOptions);return r.datepicker.formatDate(a.options.datePickerOptions.dateFormat,t,a.options.datePickerOptions)},a.init()},r.cuar.paymentDataManager.defaultOptions={rawDateFormat:"yy-mm-dd",datePickerOptions:{dateFormat:cuar.datepickerDateFormat,closeText:cuar.datepickerCloseText,currentText:cuar.datepickerCurrentText,monthNames:cuar.datepickerMonthNames,monthNamesShort:cuar.datepickerMonthNamesShort,monthStatus:cuar.datepickerMonthStatus,dayNames:cuar.datepickerDayNames,dayNamesShort:cuar.datepickerDayNamesShort,dayNamesMin:cuar.datepickerDayNamesMin,firstDay:cuar.datepickerFirstDay,isRTL:cuar.datepickerIsRTL}},r.fn.paymentDataManager=function(t){return this.each(function(){new r.cuar.paymentDataManager(this,t)})}}(jQuery),function(o){o.cuar||(o.cuar={}),o.cuar.paymentNotesManager=function(t,e){var r=this;r.$el=o(t),r.el=t,r.$el.data("cuar.paymentNotesManager",r),r.init=function(){r.options=o.extend({},o.cuar.paymentNotesManager.defaultOptions,e),r.$el.on("click",".cuar-js-remove-action",r._onRemoveActionClick),r.$el.on("click",".cuar-js-add-note",r._onAddNoteButtonClick),r._getAddNoteMessageInput().keyup(r._onAddNoteMessageChanged)},r._onAddNoteMessageChanged=function(t){r._updateAddNoteButtonState()},r._updateAddNoteButtonState=function(t){r._canAddNote()?r._getAddNoteButton().removeAttr("disabled"):r._getAddNoteButton().attr("disabled","disabled")},r._canAddNote=function(){return 0<r._getAddNoteMessage().length},r._onAddNoteButtonClick=function(t){t.preventDefault();t={action:"cuar_add_payment_note",payment_id:r._getNoteList().data("payment-id"),message:r._getAddNoteMessage(),cuar_add_payment_note_nonce:r._getNoteListAddNonce()};r._getAddNoteButton().attr("disabled","disabled"),o.post(cuar.ajaxUrl,t,function(t){var e;0==t.success?(t.data&&alert(t.data),r._updateAddNoteButtonState()):(r._getAddNoteMessageInput().val(""),r._updateAddNoteButtonState(),e=r._getNoteTemplate().clone(),r._updateNoteItem(e,t.data.id,t.data.timestamp,t.data.author,t.data.message),e.insertAfter(r._getNoteList().children(".cuar-js-add-note-form")),r._getEmptyMessage().hide())})},r._onRemoveActionClick=function(t){var e,n,a;t.preventDefault(),confirm(cuar.confirmDeletePaymentNote)&&(e=o(this).closest(r.options.noteItem),t=r._getNoteList().data("payment-id"),n=e.data("note-id"),a=r._getNoteListRemoveNonce(),o.post(cuar.ajaxUrl,{action:"cuar_delete_payment_note",payment_id:t,note_id:n,cuar_delete_payment_note_nonce:a},function(t){0==t.success?t.data&&alert(t.data):e.slideUp(400,function(){e.remove(),r._getNoteCount()<=0?r._getEmptyMessage().show():r._getEmptyMessage().hide()})}))},r._updateNoteItem=function(t,e,n,a,r){t.data("note-id",e),t.children(".cuar-js-timestamp").html(n),t.children(".cuar-js-author").html(a),t.children(".cuar-js-message").html(r)},r._getNoteCount=function(){return r._getNoteList().children(r.options.noteItem).not(r.options.addNoteForm).not(r.options.emptyMessage).not(r.options.noteItemTemplate).length},r._getEmptyMessage=function(){return o(r.options.emptyMessage,r.el)},r._getNoteList=function(){return o(r.options.noteList,r.el)},r._getAddNoteMessage=function(){return o(".cuar-js-new-note-message",r.el).val()},r._getAddNoteMessageInput=function(){return o(".cuar-js-new-note-message",r.el)},r._getAddNoteButton=function(){return o(".cuar-js-add-note",r.el)},r._getNoteListEmptyMessage=function(){return o(".cuar-js-empty-message",r.el)},r._getNoteListAddNonce=function(){return o("#cuar_add_note_nonce",r.el).val()},r._getNoteListRemoveNonce=function(){return o("#cuar_remove_note_nonce",r.el).val()},r._getNoteTemplate=function(){return o(r.options.noteItemTemplate,r.el).children(r.options.noteItem).first()},r._getNoteForm=function(){return o(r.options.addNoteForm,r.el).children(r.options.noteItem).first()},r.init()},o.cuar.paymentNotesManager.defaultOptions={noteList:".cuar-js-payment-notes",noteItem:".cuar-js-payment-note",noteItemTemplate:".cuar-js-payment-note-template",addNoteForm:".cuar-js-add-note-form",emptyMessage:".cuar-js-empty-message"},o.fn.paymentNotesManager=function(t){return this.each(function(){new o.cuar.paymentNotesManager(this,t)})}}(jQuery),function(e){e(document).ready(function(){var t=e("body");(t.hasClass("post-type-cuar_conversation")||t.hasClass("post-type-cuar_private_file")||t.hasClass("post-type-cuar_private_page")||t.hasClass("post-type-cuar_project"))&&e(document).on("tinymce-editor-init",function(t,n){n.on("focus",function(t){var e=n.getContent();e.startsWith("<div>")||n.setContent("<div>"+e+"</div>")})})})}(jQuery);
